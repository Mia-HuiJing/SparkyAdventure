html, body { 
    margin:0; 
    height:100%;
    background:#000; 
    color:#fff; 
    overflow:hidden;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; 
}
.stage { 
    position:fixed; 
    inset:0; 
    pointer-events:none; 
}

/* Background video (behind canvas) */
video { 
    position:absolute; 
    inset:0; 
    width:100%; 
    height:100%; 
    object-fit:cover; 
    z-index:0;
    background:#000; 
    transition:filter .6s ease, transform .6s ease, opacity .4s ease; 
}
video.blurred { 
    filter:blur(12px) 
    brightness(.9); 
    transform:scale(1.04); 
}

/* Canvas (Sparky) */
canvas { 
    position:relative; 
    z-index:1; 
    width:100vw; 
    height:100vh; 
    background:transparent; 
    image-rendering:crisp-edges; 
}

/* White-transparent bubble around Sparky */
.bubble {
    position: fixed; 
    left: 0; 
    top: 0; 
    translate: -50% -50%;
    z-index: 2; 
    pointer-events: none; 
    border-radius: 50%;
    background:
    radial-gradient(circle at 35% 28%, rgba(255,255,255,.55) 0%, rgba(255,255,255,.18) 20%, 
                    rgba(255,255,255,.08) 38%, rgba(255,255,255,.04) 60%, rgba(255,255,255,.02) 100%),
    radial-gradient(circle at 65% 75%, rgba(255,255,255,.10) 0%, rgba(255,255,255,.06) 60%, rgba(0,0,0,.40) 100%);
    box-shadow: inset -36px -44px 80px rgba(0,0,0,.25),
                inset  16px  18px 40px rgba(255,255,255,.25),
                0 18px 60px rgba(255,255,255,.08);
}

/* CTA after Video 1 */
.ripple-cta { 
    position:fixed; 
    inset:0; 
    display:grid; 
    place-items:center; 
    z-index:3; 
    pointer-events:none;
    opacity:0; 
    transition:opacity .35s ease; 
}
.ripple-cta.show { 
    opacity:1; 
    pointer-events:auto; 
}
.ripple-btn { 
    position:relative; 
    width:96px; 
    height:96px; 
    border-radius:999px;
    background:rgba(255,255,255,0.1); 
    border:1px solid rgba(255,255,255,0.35);
    display:grid; 
    place-items:center; 
    cursor:pointer; 
    user-select:none; 
    backdrop-filter:blur(6px); 
}
.ripple-btn span { 
    font-size:13px; 
    letter-spacing:.4px; 
    color:#fff; 
    opacity:.9; 
}
.ripple-btn::before, .ripple-btn::after { 
    content:""; 
    position:absolute; 
    inset:-8px; 
    border-radius:999px;
    border:2px solid rgba(255,255,255,.35); 
    opacity:.8; 
    animation:ripple 1.8s infinite ease-out; 
}
.ripple-btn::after { 
    inset:-18px; 
    opacity:.5; 
    animation-delay:.6s; 
}
@keyframes ripple { 
    0%{transform:scale(.7);opacity:.75;} 
    70%{transform:scale(1.25);opacity:0;} 
    100%{transform:scale(1.25);opacity:0;} 
}

/* Outline overlay */
.outline-wrap { 
    position:fixed; 
    inset:0; 
    display:grid; 
    place-items:center; 
    z-index:4; 
    pointer-events:none;
    opacity:0; transition:opacity .5s ease .15s; 
}
.outline-wrap.show { 
    opacity:1; 
    pointer-events:auto; 
}
.outline { 
    text-align:center; 
    max-width: 80ch; 
    padding: 0 24px; 
}
.outline h1 { 
    margin:0 0 8px; 
    font-size: clamp(28px, 6vw, 64px); 
    letter-spacing:.12em; 
    text-transform:uppercase; 
}
.outline p {
    margin: 0 0 8px;
    font-size: clamp(18px, 20vw, 35px);
    line-height: 2em;
}

.controls { 
    margin-top: 18px; 
    display:flex; 
    gap:12px; 
    justify-content:center; 
}

.btn { 
    pointer-events:auto; 
    appearance:none; 
    border:none; 
    border-radius:12px; 
    padding:12px 18px;
    background:rgba(255,255,255,.1); border:1px solid rgba(255,255,255,.25); color:#fff; cursor:pointer;
    font-size:15px; letter-spacing:.3px; backdrop-filter:blur(6px);
    transition:transform .15s ease, background .2s ease, box-shadow .2s ease; 
}
.btn:hover { 
    transform: translateY(-1px); 
    background:rgba(255,255,255,.16); 
}
.btn:disabled { 
    opacity:.6; 
    cursor:not-allowed; 
}

/* Bounce + shake */
.attention { animation: bounce .5s ease, shake .5s ease; }
@keyframes bounce { 0%{transform:scale(1)} 30%{transform:scale(1.06)} 60%{transform:scale(1)} 100%{transform:scale(1)} }
@keyframes shake {
    0%,100%{ transform:translateX(0) }
    20%{ transform:translateX(-5px) }
    40%{ transform:translateX(5px) }
    60%{ transform:translateX(-4px) }
    80%{ transform:translateX(4px) }
}

/* Cabinet */
.cabinet { 
    position:fixed; 
    top:12px; 
    right:12px; 
    z-index:5; 
    display:grid; 
    grid-template-columns: repeat(5, 44px); 
    gap:8px;
    padding:10px; 
    border-radius:14px; 
    background:linear-gradient(145deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.15); 
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06), 0 8px 30px rgba(0,0,0,.25);
    backdrop-filter: blur(8px); 
}
.slot { 
    width:44px; 
    height:44px; 
    display:grid; 
    place-items:center; 
    border-radius:10px;
    background: rgba(0,0,0,.35); 
    border:1px solid rgba(255,255,255,.18); 
    color:#fff; 
    font-weight:700; 
    font-size:18px; 
}

/* Hint */
.hint { 
    position:fixed; 
    left:50%; bottom:22px; 
    transform:translateX(-50%); 
    z-index:6;
    background:rgba(0,0,0,.55); 
    border:1px solid rgba(255,255,255,.25); 
    padding:8px 12px; 
    border-radius:10px;
    font-size:13px; 
    letter-spacing:.2px; 
    opacity:0; 
    transition:opacity .3s ease; 
}
.hint.show { 
    opacity:1; 
    animation: hintPulse 1.2s ease-in-out infinite; 
}
@keyframes hintPulse { 
    0%{transform:translateX(-50%) translateY(0);} 
    50%{transform:translateX(-50%) translateY(-3px);} 
    100%{transform:translateX(-50%) translateY(0);} 
}

.caption {
    position: fixed;
    z-index: 5;
    max-width: 520px;
    padding: 14px 16px;
    border-radius: 16px;
    background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.80));
    border: 1px solid rgba(255,255,255,.25);
    backdrop-filter: blur(4px);
    box-shadow: 0 10px 24px rgba(0,0,0,.35);
    font-size: clamp(14px, 2vw, 18px);
    line-height: 1.35;
    opacity: 0;
    transform: translateY(-50%);
    transition: opacity .35s ease;
    pointer-events: none;
}
.caption.show { opacity: 1; }

.hud {
    position: fixed; right: 12px; bottom: 10px; z-index: 4;
    background: rgba(0,0,0,.45);
    border: 1px solid rgba(255,255,255,.12);
    padding: 6px 10px; border-radius: 8px;
    font-size: 12px; backdrop-filter: blur(6px);
}
